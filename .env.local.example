# ========================================
# Cold Email Dashboard - Environment Variables
# ========================================
# Copy this file to .env.local and fill in your actual values
# DO NOT commit .env.local to version control!

# ========================================
# SUPABASE CONFIGURATION (Required)
# ========================================
# Get these from: https://supabase.com/dashboard/project/_/settings/api
NEXT_PUBLIC_SUPABASE_URL=https://your-project-id.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# ========================================
# CLERK AUTHENTICATION (Required)
# ========================================
# Get these from: https://dashboard.clerk.com/
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_xxxxx
CLERK_SECRET_KEY=sk_test_xxxxx

# Clerk Routes (usually these defaults are fine)
NEXT_PUBLIC_CLERK_SIGN_IN_URL=/sign-in
NEXT_PUBLIC_CLERK_SIGN_UP_URL=/sign-up

# ========================================
# WEBHOOK SECURITY (Required)
# ========================================
# Generate a secure token with: openssl rand -hex 32
# Use the SAME token in your n8n workflows
DASH_WEBHOOK_TOKEN=your-random-webhook-token-here

# ========================================
# MATERIALIZED VIEWS REFRESH (Required for Production)
# ========================================
# Generate another secure token with: openssl rand -hex 32
# Used by Vercel cron job to refresh database views
MATERIALIZED_VIEWS_REFRESH_TOKEN=your-refresh-token-here

# ========================================
# DEVELOPMENT/TESTING (Optional)
# ========================================
# Set to 'true' to bypass Clerk auth in E2E tests (localhost only)
PLAYWRIGHT_TEST=false

# Environment mode (auto-detected, usually don't need to set)
NODE_ENV=development

# Playwright base URL for E2E tests
BASE_URL=http://localhost:3000

# ========================================
# DIGITALOCEAN (Required for Genesis provisioning)
# ========================================
# Personal access token — create at: https://cloud.digitalocean.com/account/api/tokens
# Note: This is only used by the control-plane to manage DO accounts.
# Per-tenant DO tokens are stored encrypted in genesis.do_accounts via the UI.
DIGITALOCEAN_API_TOKEN=dop_v1_your-do-token-here

# ========================================
# REDIS (Required for queue / rate-limiting)
# ========================================
# Local dev: redis://localhost:6379
# Upstash: rediss://:your-password@your-endpoint.upstash.io:6379
REDIS_URL=redis://localhost:6379

# ========================================
# ENCRYPTION (Required)
# ========================================
# Master key used to encrypt/decrypt workspace credentials (AES-256-GCM)
# Generate with: openssl rand -hex 32
# Must match the value deployed to all Sidecar containers
INTERNAL_ENCRYPTION_KEY=your-32-byte-hex-key-here

# ========================================
# GENESIS SIDECAR IMAGE (Required for provisioning)
# ========================================
# Docker Hub image pushed before provisioning the first client droplet
# Build & push: cd sidecar && docker build -t yourdockerhub/genesis-sidecar:latest . && docker push yourdockerhub/genesis-sidecar:latest
GENESIS_SIDECAR_IMAGE=upshot/genesis-sidecar:latest

# ========================================
# GLOBAL AI / SCRAPING KEYS (Operator-Paid)
# ========================================
# These are injected into every tenant droplet at provision time.
# Costs are borne by you (the operator), not the tenant.

# Relevance AI — workspace token
# Get from: https://app.relevanceai.com → Settings → API Keys
RELEVANCE_AI_API_KEY=your-relevance-ai-api-key

# Apify — web scraping / LinkedIn scraper
# Get from: https://console.apify.com/account/integrations
APIFY_API_KEY=your-apify-api-key

# Google Custom Search Engine
# Create CSE at: https://programmablesearchengine.google.com
# API key from:  https://console.cloud.google.com → Credentials → Create API Key
GOOGLE_CSE_API_KEY=your-google-cse-api-key
GOOGLE_CSE_CX=your-google-cse-cx-id
