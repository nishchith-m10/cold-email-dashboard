{
  "project": "cold-email-dashboard",
  "branchName": "ralph/domain2-templates-workflow-deployer",
  "description": "Domain 2: DEFAULT_TEMPLATES & Workflow Deployer",
  "userStories": [
    {
      "id": "D2-001",
      "title": "Gate Sidecar auto-deploy and document orchestrator-first architecture",
      "description": "Gate DEPLOY_CAMPAIGN_WORKFLOWS behind SIDECAR_AUTO_DEPLOY env var. Add deprecation notice to workflow-deployer.ts.",
      "acceptanceCriteria": [
        "DEPLOY_CAMPAIGN_WORKFLOWS returns error unless SIDECAR_AUTO_DEPLOY=true",
        "DEPLOY_WORKFLOW command is unaffected",
        "workflow-deployer.ts header has deprecation notice",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": "Committed as 163f609"
    },
    {
      "id": "D2-002",
      "title": "Add required_credentials validation before workflow deployment",
      "description": "In orchestrator Step 5, validate each template required_credentials before deployment. Build credTypeToN8nId map, check 3 conditions.",
      "acceptanceCriteria": [
        "credTypeToN8nId map built from config.credentials + resources.n8n_credential_ids",
        "Each template required_credentials validated with 3 checks",
        "Missing credential type throws IgnitionError",
        "Missing template_placeholder throws IgnitionError",
        "Missing n8n ID throws IgnitionError",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": "Committed as 8cf0465"
    },
    {
      "id": "D2-003",
      "title": "Scan for unresolved placeholders after workflow substitution",
      "description": "In HttpWorkflowDeployer.deploy(), scan for YOUR_* tokens after substitution. Credential placeholders throw; content placeholders warn.",
      "acceptanceCriteria": [
        "Regex scan for /YOUR_[A-Z_]+/g after substitution",
        "YOUR_CREDENTIAL_* matches throw Error",
        "Non-credential YOUR_* matches log console.warn",
        "Unique deduplication of matches",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": true,
      "notes": "Committed as 8be3034"
    },
    {
      "id": "D2-004",
      "title": "Sidecar deployer deploys all 7 workflow templates",
      "description": "Update getTemplateFiles() to return all 7 templates (3 email + 4 support) instead of only 3.",
      "acceptanceCriteria": [
        "getTemplateFiles() returns 7 templates total",
        "Email templates selected by provider (gmail vs smtp)",
        "Support templates: Email Preparation, Research Report, Reply Tracker, Opt-Out",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": true,
      "notes": "Committed as eb3f82f"
    },
    {
      "id": "D2-005",
      "title": "Throw on empty credential placeholder values in sidecar deployer",
      "description": "In injectCredentialPlaceholders(), empty YOUR_CREDENTIAL_* values throw Error; empty content placeholders are silently skipped.",
      "acceptanceCriteria": [
        "Empty YOUR_CREDENTIAL_* value throws Error",
        "Empty content placeholder values are skipped",
        "Error message guides user to inject credentials first",
        "Typecheck passes"
      ],
      "priority": 5,
      "passes": true,
      "notes": "Committed as 36df5a4"
    }
  ]
}
